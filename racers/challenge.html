<!DOCTYPE HTML>
<html>

<head>
	<title>Challenge</title>
	<meta charset="utf-8" />
	<meta name="viewport"
		  content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet"
		  href="../assets/css/main.css" />
	<noscript>
		<link rel="stylesheet"
			  href="../assets/css/noscript.css" />
	</noscript>
</head>

<body class="is-preload">
	<!-- Wrapper -->
	<div id="wrapper">
		<!-- Header -->
		<header id="header">
			<h1>ANXRacers Link Opener</h1>
		</header>

		<!-- Main -->
		<div id="main">
			<section id="content"
					 class="main">
				<h2>Android</h2>
				<p> This page will try to launch ANXRacers.
					If you don't have the game then get it below and revisit the page:
				</p><a href="https://play.google.com/store/apps/details?id=com.aeonax.racers"
				   class="button icon brands fa-google-play">Android Phones / Tablets / TVs</a>
			</section>
			<section id="content"
					 class="main">
				<h2>Windows</h2>
				<p> Get ANXRacers from below link.
				</p>
				<a href="https://aeonax.itch.io/racers"
				   class="button icon brands fa-itch-io"
				   target="_blank">Windows</a><br /><br /><br />
				<p>
					Launch ANXRacers and click on below button, and then go to Start Screen of the ANXRacers.
				</p>
				<a id="clippy"
				   class="button icon fa-clipboard">Clipboard</a>&nbsp;
				<p>
					Then click on the Link Button that will become visible on start screen
				</p>
			</section>
		</div>
	</div>
	<footer id="footer">
		<p class="copyright">Â©AEonAX. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
	</footer>
	<script>
		// setTimeout(function appNotInstalled() {
		// 	window.location.replace("https://play.google.com/store/apps/details?id=com.aeonax.racers&referrer="+ "anx://racers?" + window.location.search.replace("?", ''));
		// }, 100);
		function fallbackCopyTextToClipboard(text) {
			var textArea = document.createElement("textarea");
			textArea.value = text;

			// Avoid scrolling to bottom
			textArea.style.top = "0";
			textArea.style.left = "0";
			textArea.style.position = "fixed";

			document.body.appendChild(textArea);
			textArea.focus();
			textArea.select();

			try {
				var successful = document.execCommand('copy');
				var msg = successful ? 'successful' : 'unsuccessful';
				console.log('Fallback: Copying text command was ' + msg);
			} catch (err) {
				console.error('Fallback: Oops, unable to copy', err);
			}

			document.body.removeChild(textArea);
		}
		function copyTextToClipboard(text) {
			if (!navigator.clipboard) {
				fallbackCopyTextToClipboard(text);
				return;
			}
			navigator.clipboard.writeText(text).then(function () {
				console.log('Async: Copying to clipboard was successful!');
			}, function (err) {
				console.error('Async: Could not copy text: ', err);
			});
		}
		document.querySelector('#clippy').addEventListener('click', function (event) {
			copyTextToClipboard("anx://racers?" + window.location.search.replace("?", ''));
		});
		window.location.replace(
			"anx://racers?" + window.location.search.replace("?", '')
		);

	</script>
</body>

</html>